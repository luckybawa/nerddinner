[
  {
    "Id": "822423",
    "ThreadId": "351920",
    "Html": "\r\n<p>Hi everyone!</p>\r\n<p>I have a successfully converted nerddinner to a multilanguage site. Now I want to improve the site for better google indexing. The users are able to select prefered language using a drop down list. There are x numbers of languages to chose between.&nbsp;</p>\r\n<p>I would like that when a users has chosen prefered language, then the language code should be attached to the url. This should ofcourse change if the users decides to change the language.&nbsp;</p>\r\n<p>My modyfied&nbsp;Gloabl.asax file looks like this</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>       <span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> RegisterRoutes(RouteCollection routes)\r\n    {\r\n        routes.IgnoreRoute(<span style=\"color:#a31515\">&quot;{resource}.axd/{*pathInfo}&quot;</span>);\r\n\r\n        routes.MapRoute(\r\n                <span style=\"color:#a31515\">&quot;PrettyDetails&quot;</span>,\r\n                <span style=\"color:#a31515\">&quot;{Id}&quot;</span>,\r\n                    <span style=\"color:blue\">new</span> { controller = <span style=\"color:#a31515\">&quot;Dinners&quot;</span>, action = <span style=\"color:#a31515\">&quot;Details&quot;</span> },\r\n                    <span style=\"color:blue\">new</span> { Id = <span style=\"color:#a31515\">@&quot;\\d&#43;&quot;</span> }\r\n                );\r\n\r\n\r\n        routes.MapRoute(\r\n                <span style=\"color:#a31515\">&quot;UpcomingDinners&quot;</span>,\r\n                <span style=\"color:#a31515\">&quot;Dinners/Page/{page}&quot;</span>,\r\n                <span style=\"color:blue\">new</span> { controller = <span style=\"color:#a31515\">&quot;Dinners&quot;</span>, action = <span style=\"color:#a31515\">&quot;Index&quot;</span> }\r\n                );\r\n\r\n\t\troutes.MapRoute( \r\n\t\t\t\t<span style=\"color:#a31515\">&quot;Default&quot;</span>, <span style=\"color:green\">// Route name </span>\r\n\t\t\t\t<span style=\"color:#a31515\">&quot;{controller}/{action}/{id}/{language}&quot;</span>, <span style=\"color:green\">// URL with parameters </span>\r\n\t\t\t\t<span style=\"color:blue\">new</span> { controller = <span style=\"color:#a31515\">&quot;Home&quot;</span>, action = <span style=\"color:#a31515\">&quot;Index&quot;</span>, id = <span style=\"color:#a31515\">&quot;&quot;</span>, language=<span style=\"color:#a31515\">&quot;en&quot;</span> }, <span style=\"color:green\">// Parameter defaults</span>\r\n\t\t\t\t<span style=\"color:blue\">new</span> { id = <span style=\"color:#a31515\">@&quot;\\d&#43;&quot;</span> }\r\n\t\t);\r\n\r\n        routes.MapRoute(\r\n            <span style=\"color:#a31515\">&quot;OpenIdDiscover&quot;</span>,\r\n            <span style=\"color:#a31515\">&quot;Auth/Discover&quot;</span>\r\n            );\r\n    }\r\n</pre>\r\n</div>\r\n<p></p>\r\n<div>\r\n<p>Note: the language code will be in following format, es, en, us, sw and so forth. I will not be using culture values like es-BO,&nbsp;en-GB, en-US...&nbsp;</p>\r\n<p>My HomeController looks like this</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">public</span> <span style=\"color:blue\">class</span> HomeController : Controller \r\n{\r\n        <span style=\"color:blue\">public</span> ActionResult Index(<span style=\"color:blue\">int</span> id, <span style=\"color:blue\">string</span> language)\r\n        {\r\n        <span style=\"color:green\">//do something... </span>\r\n        } \r\n} \r\n\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>string language is ofcourse etc; en, cz, es...</p>\r\n<p>However running this return following error. &quot;The incoming request does not match any route.&quot;</p>\r\n<p>The error comes from Default.aspx.cs file and the code goes:</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>        <span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> Page_Load(<span style=\"color:blue\">object</span> sender, System.EventArgs e) \r\n        {\r\n            HttpContext.Current.RewritePath(Request.ApplicationPath, <span style=\"color:blue\">false</span>);\r\n            IHttpHandler httpHandler = <span style=\"color:blue\">new</span> MvcHttpHandler();\r\n            httpHandler.ProcessRequest(HttpContext.Current);\r\n        }\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>&nbsp;</p>\r\n<p>Any suggestions!</p>\r\n<p>Thanks.&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</div>\r\n<p>&nbsp;</p>\r\n",
    "PostedDate": "2012-04-11T08:21:22.64-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]